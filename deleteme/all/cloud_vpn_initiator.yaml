---
cloud_vpn_initiator_provisioner_role: "{{ config_map[cloud_vpn_initiator_provisioner]['role'] }}"
cloud_vpn_initiator_aws_access_key: "{{ config_map[cloud_vpn_initiator_provisioner]['access_key'] }}"
cloud_vpn_initiator_aws_secret_key: "{{ config_map[cloud_vpn_initiator_provisioner]['secret_key'] }}"
cloud_vpn_initiator_provider_role: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['role'] }}"
cloud_vpn_initiator_key_name: "{{ cloud_vpn_initiator_image_id }}"
cloud_vpn_initiator_instance_size: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['size'] }}"
cloud_vpn_initiator_user: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['user'] }}"
cloud_vpn_initiator_ssh_private_key_file: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['key'] }}"
cloud_vpn_initiator_image_name: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['name'] }}"
cloud_vpn_initiator_image_owner: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['owner'] }}"
cloud_vpn_initiator_vpc_cidr: "{{ cloud_vpn_vpc_cidr | ipsubnet(24, cloud_vpn_initiator_site_id) }}"
cloud_vpn_initiator_cidr: "{{ cloud_vpn_initiator_vpc_cidr | ipsubnet(28, 1) }}"
cloud_vpn_initiator_private_ip: "{{ cloud_vpn_initiator_cidr | nthhost(5) }}"
# the second ip in initiator's subnet
cloud_vpn_initiator_tunnel_ip: "{{ cloud_vpn_tunnel_cidr | ipsubnet(30, cloud_vpn_initiator_site_id) | nthhost(2) }}"
cloud_vpn_initiator_tunnel_interface: "{{ config_map[cloud_vpn_initiator_provisioner][cloud_vpn_initiator_provider]['tunnel_interface_prefix'] }}{{ cloud_vpn_initiator_tunnel_interface_id }}"
cloud_vpn_initiator_tunnel_interface_mark: "{{ cloud_vpn_initiator_site_id }}/0xffffffff"
cloud_vpn_initiator_tunnel_failover_interface_mark: "{{ cloud_vpn_initiator_tunnel_interface_mark }}"
# use responder's site id as interface index
cloud_vpn_initiator_tunnel_interface_id: "{{ cloud_vpn_responder_site_id }}"

